<html>
<head>
	<title>SyncTab: Login</title>
	<script type="text/javascript" src="jquery.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var bgPage = chrome.extension.getBackgroundPage();

			if (!bgPage.needLogin()) {
				$('#loginContent').hide();
				$("#loggedInNowContent").hide();
				$('#loggedInAlreadyContent').show();
			}
			else {
				$('#login').click(function() {
					var email = $("#email").val();
					var password = $("#password").val();
					if (email && password) {
						bgPage.authorize(email, password, function(status) {
							if (status) {
								$("#loginContent").hide();
								$("#loggedInNowContent").show();

								window.close();
							}
						});
					}
					else {
						
					}
				});
			}
		});
	</script>
</head>
<body>
	<div id="loginContent">
		<h1>SyncTab: Login</h1>
		
		<p>
			<label for="email">Email</label>
			<input type="text" id="email" value="" maxlength="400"/>
		</p>

		<p>
			<label for="password">Password</label>
			<input type="password" id="password" value="" maxlength="100"/>
		</p>

		<input type="button" id="login" value="Login"/>
	</div>
	<div id="loggedInNowContent" style="display: none">
		You are logged in now.
	</div>
	<div id="loggedInAlreadyContent" style="display: none">
		You are logged in already.
	</div>
</body>
</html>